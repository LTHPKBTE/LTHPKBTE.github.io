(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["map-view"],{"0127":function(e,t,i){},"0330":function(e,t,i){},"0696":function(e,t,i){},"07ac":function(e,t,i){var a=i("23e7"),o=i("6f53").values;a({target:"Object",stat:!0},{values:function(e){return o(e)}})},"0fc7":function(e,t,i){},1012:function(e,t,i){},"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"171d":function(e,t,i){},"17d4":function(e,t,i){"use strict";var a=i("a406"),o=i.n(a);o.a},"1a28":function(e,t,i){"use strict";var a=i("d8ef"),o=i.n(a);o.a},3317:function(e,t,i){"use strict";var a=i("0330"),o=i.n(a);o.a},3583:function(e,t,i){"use strict";var a=i("fd8b"),o=i.n(a);o.a},"40f3":function(e,t,i){},"4bb4":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.metadataLoaded&&!e.mapDataLoaded?i("splash-screen",{attrs:{mission:e.mission}}):e._e(),i("div",[e.metadataLoaded&&e.mapDataLoaded?i("floor-toggle",{ref:"floorToggle",attrs:{mission:e.mission,"current-floor":e.currentFloor,nodes:e.nodes,"current-variant":e.currentVariant},on:{"change-floor":e.onChangeFloor}}):e._e(),i("div",{class:"hm-editor-"+e.editorState.toLowerCase(),attrs:{id:"map"}}),e.metadataLoaded&&e.mapDataLoaded?i("sidebar",{ref:"sidebar",attrs:{game:e.game,mission:e.mission,"logged-in":e.loggedIn,"top-level-categories":e.topLevelCategories,categories:e.categories,nodes:e.nodes,ledges:e.ledges,foliage:e.foliage,disguises:e.disguises,"max-zoom-level":e.mission.maxZoom,"min-zoom-level":e.mission.minZoom,"current-zoom-level":e.map.getZoom(),"editor-state":e.editorState,"drawing-active":e.polyActive,"current-disguise":e.currentDisguise,"current-variant":e.currentVariant},on:{"hide-all":e.onHideAll,"show-all":e.onShowAll,"search-item":e.onSearchItem,"hide-category":e.onHideCategory,"show-category":e.onShowCategory,"hide-top-level-category":e.onHideTopLevelCategory,"show-top-level-category":e.onShowTopLevelCategory,"zoom-in":e.onZoomIn,"zoom-out":e.onZoomOut,"master-edit-toggle":e.onMasterEditToggle,"launch-editor":e.onLaunchEditor,"enable-ledge-creation":e.onEnableLedgeCreation,"enable-foliage-creation":e.onEnableFoliageCreation,"enable-region-creation":e.onEnableDisguiseRegionCreation,"disguise-selected":e.onDisguiseSelected,"replace-disguise-areas":e.onReplaceDisguiseAreas,"variant-selected":e.onVariantSelected}}):e._e(),i("node-popup",{ref:"nodePopup",attrs:{node:e.nodeForModal,"logged-in":e.loggedIn,game:e.game,"editor-state":e.editorState},on:{"delete-node":e.deleteNode,"edit-node":e.prepareEditor}}),e.mission?i("add-edit-item-modal",{ref:"addEditItemModal",attrs:{"top-level-categories":e.topLevelCategories,categories:e.categories,"clicked-point":e.clickedPoint,"current-level":e.currentFloor,node:e.nodeForEditing,mission:e.mission},on:{"item-created":e.onItemCreated,"item-updated":e.onItemUpdated}}):e._e(),i("delete-entity-modal",{attrs:{entity:e.deletionItem,"entity-type":e.deletionItemType},on:{"item-deleted":e.onPolyDeleted}}),i("move-node-modal",{attrs:{node:e.nodeForMoving}})],1)],1)},o=[],s=(i("99af"),i("4de4"),i("7db0"),i("caad"),i("d81d"),i("b0c0"),i("d3b7"),i("07ac"),i("ac1f"),i("2532"),i("3ca3"),i("5319"),i("1276"),i("159b"),i("ddb0"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"overlay",style:"background: #ccc url("+e.mission.backgroundUrl+") no-repeat; background-size: cover"},[i("div",{staticClass:"overlay-container",style:"background: url('"+e.mission.tileUrl+"') center center / cover no-repeat"},[i("img",{staticClass:"img-fluid",staticStyle:{visibility:"hidden"},attrs:{src:e.mission.tileUrl,alt:"Mission Thumbnail"}}),i("div",{staticClass:"footer"},[i("div",{staticClass:"footer-image"},[i("game-icon",{attrs:{icon:"mission","font-style":"normal"}})],1),i("div",{staticClass:"footer-text"},[i("h2",[e._v(e._s(e.lang("mission-types."+e.mission.missionType.toLowerCase(),e.mission.missionType)))]),i("h1",[e._v(e._s(e.lang("missions."+e.mission.slug,e.mission.name)))])]),i("div",{staticClass:"loader",staticStyle:{display:"inline-block",height:"48px",float:"right"}})])])])}),n=[],r=i("e6e5"),l={name:"SplashScreen",components:{GameIcon:r["a"]},props:{mission:Object}},c=l,d=(i("923e"),i("2877")),u=Object(d["a"])(c,s,n,!1,null,"cfda3fa6",null),m=u.exports,g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"floor-toggle"},[e._l(e.range(e.mission.lowestFloorNumber,e.mission.highestFloorNumber).reverse(),(function(t){return i("div",{key:t,staticClass:"floor-info",class:{selected:e.currentFloor===t}},[e.floorNames[t]&&e.floorNames[t].header?i("div",{staticClass:"floor-header"},[i("span",[e._v(e._s(e.floorNames[t].header))])]):e._e(),i("div",{staticClass:"floor-details"},[i("div",{staticClass:"floor",on:{click:function(i){return e.$emit("change-floor",t)}}},[e.floorNames[t]&&e.floorNames[t].value?i("span",[e._v(e._s(e.floorNames[t].value))]):e._e()]),i("div",{staticClass:"item-count",class:{"has-search-results":e.hasSearchResults(t)}},[e._v(" "+e._s(e.calculateNumber(t))+" ")])])])})),e.mission.satelliteView?i("div",{staticClass:"floor-info text-center ",class:{selected:-99===e.currentFloor}},[i("div",{staticClass:"floor-details"},[i("div",{staticClass:"floor satellite",on:{click:function(t){return e.$emit("change-floor",-99)}}},[e._v(" "+e._s(e.$t("map.satellite"))+" ")])])]):e._e()],2)},p=[],f=(i("a9e3"),i("d4ec")),h=i("bee2"),v=function(){function e(){Object(f["a"])(this,e)}return Object(h["a"])(e,null,[{key:"range",value:function(e,t){for(var i=[],a=0,o=e;o<=t;o++)i[a]=o,a++;return i}}]),e}(),y={name:"FloorToggle",props:{mission:Object,currentFloor:Number,nodes:Array,currentVariant:Object},data:function(){return{floorNames:[],lastFloorType:""}},mounted:function(){this.buildLevelNames()},methods:{range:function(e,t){return v.range(e,t)},buildLevelNames:function(){if(void 0!==this.mission){this.floorNames={};for(var e=this.mission.highestFloorNumber;e>=this.mission.lowestFloorNumber;e--)this.mission.floorNames[e]?this.floorNames[e]={header:this.isNewFloorType(this.$t(this.mission.floorNames[e].nameKey))?this.lastFloorType:void 0,value:this.getFormattedFloorName(this.$t(this.mission.floorNames[e].nameKey))}:this.floorNames[e]={header:void 0,value:this.$t("map.level-number",{levelNumber:e})}}else console.error("RIP")},isNewFloorType:function(e){if(!e.length)return!1;if(!e.includes("|")&&e!==this.lastFloorType)return e!==this.lastFloorType&&(this.lastFloorType=e,!0);var t=e.split("|");return t[0]!==this.lastFloorType&&(this.lastFloorType=t[0],!0)},getFormattedFloorName:function(e){return e.includes("|")?e.split("|")[1]:e},calculateNumber:function(e){var t=this;return this.nodes.filter((function(i){return i.level===e&&i.visible&&i.variants.includes(t.currentVariant.id)})).length},hasSearchResults:function(e){return this.nodes.some((function(t){return t.level===e&&t.searchResult}))}}},b=y,_=(i("996b"),Object(d["a"])(b,g,p,!1,null,"d9e0de9c",null)),C=_.exports,E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{id:"popover-modal",tabindex:"-1",flush:""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[e.loggedIn&&"ITEMS"===e.editorState?[i("div",{staticClass:"edit-delete-buttons"},[i("div",{staticClass:"edit"},[i("game-button",{attrs:{"data-dismiss":"modal"},on:{click:function(t){return e.$emit("edit-node",e.node.id)}}},[i("game-icon",{attrs:{icon:"edit","font-style":"normal"}}),e._v(" "+e._s(e.$t("map.edit"))+" ")],1)],1),i("div",{staticClass:"delete"},[e.showingConfirmDeletion?e._e():i("game-button",{on:{click:e.showConfirmDeletion}},[i("game-icon",{attrs:{icon:"trash","font-style":"normal"}}),e._v(" "+e._s(e.$t("map.delete"))+" ")],1),e.showingConfirmDeletion?i("game-button",{attrs:{disabled:e.blockDeleteButton},on:{click:e.deleteNode}},[i("game-icon",{attrs:{icon:"arrow-right","font-style":"normal"}}),e._v(" "+e._s(e.$t("map.confirm-item-deletion-title",{item:"Node"}))+" ")],1):e._e()],1)])]:e._e(),i("game-button",{attrs:{"data-dismiss":"modal"}},[i("game-icon",{attrs:{icon:"failed","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.close"))+" ")],1)]},proxy:!0}])},[e.node?i("div",{staticClass:"popover-content"},[e.node.image?i("div",{staticClass:"image"},[i("img",{staticClass:"img-fluid",attrs:{src:e.node.image}})]):e._e(),i("div",{staticClass:"details",class:e.node.image?"":"no-image"},[i("div",{staticClass:"icon-and-details"},["corrupt"!==e.fontIconForNodeSubgroup?i("div",{staticClass:"icon"},[i("game-icon",{attrs:{icon:e.fontIconForNodeSubgroup,"font-style":"solid"}})],1):e._e(),i("div",{staticClass:"inner-details"},[""!==e.node.name?i("p",{staticClass:"group"},[e._v(e._s("agency-pickup"===e.node.subgroup?e.agencyPickupName:e.node.group))]):e._e(),i("p",{staticClass:"name"},[e._v(e._s(""===e.node.name?e.node.group:e.node.name))])])]),e.descriptionNote?i("div",{staticClass:"description"},[e._v(" "+e._s(e.descriptionNote.text)+" ")]):e._e(),e.node.notes.filter((function(e){return"description"!==e.type})).length?i("div",{staticClass:"notes"},e._l(e.node.notes.filter((function(e){return"description"!==e.type})),(function(t){return i("div",{staticClass:"note",class:t.type},[i("div",{staticClass:"type"},[e._v(e._s(e.getLocalizedNoteType(t)))]),i("div",[e._v(e._s(t.text))])])})),0):e._e(),null!==e.node.target&&""!==e.node.target&&"agency-pickup"!==e.node.subgroup?i("div",{staticClass:"target"},[e.fontIconForActionTarget?i("game-icon",{attrs:{icon:e.fontIconForActionTarget,"font-style":"normal"}}):e._e(),i("div",{staticClass:"header-and-target"},[i("div",[e._v(e._s(e.actionTextForActionTarget))]),i("div",{staticClass:"action-or-npc-name"},[e._v(e._s(e.node.target))])])],1):e._e()])]):e._e()])},k=[],N=i("714b"),w=i("24e8"),M={name:"NodePopup",components:{GameButton:w["a"],GameIcon:r["a"],Modal:N["a"]},props:{game:Object,node:Object,loggedIn:Boolean,editorState:String},data:function(){return{showingConfirmDeletion:!1,blockDeleteButton:!1}},computed:{agencyPickupName:function(){return"agency-pickup"===this.node.icon?"Agency Pickup":"Hidden Stash"},descriptionNote:function(){return this.node.notes.find((function(e){return"description"===e.type}))},backgroundCss:function(){return this.node.image?(e="absolution"===this.game.slug?"background-image: url('".concat(this.node.image,"'), radial-gradient(#69696a, #171718)"):"background: url('".concat(this.node.image,"') center center / cover no-repeat"),e):"";var e},actionTextForActionTarget:function(){return"poison"===this.node.icon?this.$t("map.npc"):["interaction","sabotage","distraction","alarm"].includes(this.node.subgroup)?this.$t("map.action"):null},fontIconForActionTarget:function(){return"poison"===this.node.icon?"npc":["interaction","sabotage","distraction","alarm"].includes(this.node.subgroup)?"settings":null},fontIconForNodeSubgroup:function(){switch(this.node.subgroup){case"sabotage":case"explosive":return"explosive";case"distraction":return"distraction";case"poison":case"poison-weapon":return"poison";case"misc-item":return this.getMiscItemIcon(this.node);case"intel":case"camera-intel":return"intel";case"disguise":return"disguise";case"blend-in":return"emote";case"conceal-item":case"weapon-crate":return"loadout";case"locked-door":return"locked";case"interaction":return"tool";case"alarm":return"online";case"frisk":return"frisk";case"location":return"story";case"lethal-melee":case"non-lethal-melee":return"melee";case"firearm":return"concealed-weapon";case"ammo":return"difficulty-3";case"starting-location":return"starting";case"exit-location":return"exit";case"agency-pickup":return"stash-point-empty";case"area":return"info";case"passage":return"arrow-right";case"up-pipe":case"up-stair":return"elevation";default:return"corrupt"}}},methods:{resetDeletionState:function(){this.showingConfirmDeletion=!1},getLocalizedNoteType:function(e){return"info"===e.type?this.$t("map.information"):this.$t("map.".concat(e.type))},getMiscItemIcon:function(e){return e.icon.includes("key")?"key":"challenge-category-item"},showConfirmDeletion:function(){this.showingConfirmDeletion=!0},deleteNode:function(){var e=this;this.blockDeleteButton=!0,this.$http.delete("".concat(this.$domain,"/api/nodes/").concat(this.node.id)).then((function(t){e.blockDeleteButton=!1,e.showingConfirmDeletion=!1,$("#edit-item-modal").modal("hide"),e.$toast.success({message:"Item deleted!"}),e.$emit("delete-node",e.node.id)})).catch((function(t){e.blockDeleteButton=!1,e.showingConfirmDeletion=!1,e.$toast.error({message:"Failed to delete item!"})}))}}},I=M,x=(i("3317"),Object(d["a"])(I,E,k,!1,null,"b3089c18",null)),A=x.exports,D=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("nav",{staticClass:"navbar navbar-fixed-right navbar-dark"},[i("div",{staticClass:"mobile-header"},[i("div",{staticClass:"logo"},[i("router-link",{attrs:{to:{name:"home"}}},[i("img",{staticClass:"img-fluid d-block d-md-none",attrs:{src:"/img/png/logos/hitmaps.png",alt:"HITMAPS Logo"}})])],1),i("div",{staticClass:"header-buttons"},[e.getAllVariantsForUser().length>1?i("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#variants-toggle","aria-controls":"variants-toggle","aria-expanded":"true","aria-label":"Toggle variant selection box"}},[i("game-icon",{attrs:{icon:e.currentVariant.icon,"font-style":"solid"}})],1):e._e(),e._m(0),e._m(1),e._m(2),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:e.$t("language-modal.change-language"),expression:"$t('language-modal.change-language')",arg:"bottom"}],staticClass:"navbar-toggler",attrs:{type:"button","aria-label":e.$t("language-modal.change-language"),"data-toggle":"modal","data-target":"#locale-modal"}},[i("country-flag",{attrs:{country:e.countryFlag}})],1)])]),i("div",{staticClass:"navbar-collapse"},[i("div",{staticClass:"header d-none d-md-block"},[i("router-link",{attrs:{to:{name:"home"}}},[i("img",{staticClass:"img-fluid",attrs:{src:"/img/png/logos/hitmaps.png",alt:"HITMAPS Logo"}})])],1),"OFF"!==e.editorState&&"MENU"!==e.editorState?i("editor-header",{attrs:{"editor-state":e.editorState}}):e._e(),i("div",{staticClass:"map-control d-none d-md-flex"},[i("div",{attrs:{id:"map-control-buttons"}},[i("control-button",{class:e.currentZoomLevel===e.maxZoomLevel?"disabled":"",on:{click:function(t){return e.$emit("zoom-in")}}},[e._v("+")]),i("control-button",{class:e.currentZoomLevel===e.minZoomLevel?"disabled":"",on:{click:function(t){return e.$emit("zoom-out")}}},[e._v("-")])],1),i("div",{staticClass:"control-buttons"},[i("control-button",{directives:[{name:"tooltip",rawName:"v-tooltip:bottom",value:e.$t("language-modal.change-language"),expression:"$t('language-modal.change-language')",arg:"bottom"}],attrs:{"data-toggle":"modal","data-target":"#locale-modal"}},[i("country-flag",{attrs:{country:e.countryFlag}})],1),e.loggedIn?[e.showDebug()?i("control-button",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:e.$t("map.debug-mode"),expression:"$t('map.debug-mode')",arg:"top"}],style:e.debugMode?"background: white; color: black":"",attrs:{id:"debug-button"},on:{click:function(t){e.debugMode=!e.debugMode}}},[i("i",{staticClass:"fas fa-bug"})]):e._e(),i("control-button",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:e.$t("map.edit-map"),expression:"$t('map.edit-map')",arg:"top"}],attrs:{id:"edit-button"},on:{click:function(t){return e.$emit("master-edit-toggle")}}},[i("i",{staticClass:"fas fa-pencil-alt"})]),i("control-button",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:e.$t("authentication.log-out"),expression:"$t('authentication.log-out')",arg:"top"}],on:{click:e.logout}},[i("i",{staticClass:"fas fa-sign-out-alt"})])]:i("a",{on:{click:e.beginDiscordLogin}},[i("control-button",[i("i",{staticClass:"fas fa-sign-in-alt"})])],1)],2)]),i("div",{directives:[{name:"show",rawName:"v-show",value:"OFF"===e.editorState,expression:"editorState === 'OFF'"}]},[i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"variants-toggle"}},[i("mission-variant-selector",{attrs:{mission:e.mission,"current-variant":e.currentVariant,"logged-in":e.loggedIn},on:{"variant-selected":e.onVariantSelected}})],1),i("div",{staticClass:"navbar-collapse collapse show",attrs:{id:"search-item-toggle"}},[i("item-search",{attrs:{"searchable-nodes":e.getSearchableNodes()},on:{"search-item":e.onSearchItem}})],1),i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"disguises-toggle"}},[i("disguise-dropdown",{attrs:{game:e.game,mission:e.mission,disguises:e.disguises,"current-disguise":e.currentDisguise},on:{"disguise-selected":e.onDisguiseSelected}})],1),i("div",{staticClass:"collapse navbar-collapse",attrs:{id:"floors-and-layers-toggle"}},[i("hide-select-all",{on:{"hide-all":function(t){return e.$emit("hide-all")},"show-all":function(t){return e.$emit("show-all")}}}),e._l(e.topLevelCategories,(function(t){return i("top-level-category-card",{key:t,attrs:{"top-level-category-name":t,categories:e.categories.filter((function(e){return e.type===t})),nodes:e.nodes.filter((function(e){return e.type===t})),ledges:e.ledges,foliage:e.foliage},on:{"hide-category":e.onHideCategory,"show-category":e.onShowCategory,"hide-top-level-category":e.onHideTopLevelCategory,"show-top-level-category":e.onShowTopLevelCategory}})}))],2)]),"MENU"===e.editorState?i("edit-landing",{attrs:{"nodes-only":"Sniper Assassin"===e.mission.missionType},on:{"launch-editor":e.onLaunchEditor}}):e._e(),"ITEMS"===e.editorState?i("edit-items",{on:{"launch-editor":e.onLaunchEditor}}):e._e(),"LEDGES"===e.editorState?i("edit-ledges",{attrs:{"drawing-active":e.drawingActive},on:{"enable-ledge-creation":e.onEnableLedgeCreation,"launch-editor":e.onLaunchEditor}}):e._e(),"FOLIAGE"===e.editorState?i("edit-foliage",{attrs:{"drawing-active":e.drawingActive},on:{"enable-foliage-creation":e.onEnableFoliageCreation,"launch-editor":e.onLaunchEditor}}):e._e(),"DISGUISE-REGIONS"===e.editorState?i("edit-disguise-regions",{attrs:{"drawing-active":e.drawingActive,"current-disguise":e.currentDisguise,disguises:e.disguises},on:{"disguise-selected":e.onDisguiseSelected,"enable-region-creation":e.onEnableRegionCreation,"launch-editor":e.onLaunchEditor,"replace-disguise-areas":e.onReplaceDisguiseAreas}}):e._e()],1)])},S=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#search-item-toggle","aria-controls":"search-item-toggle","aria-expanded":"true","aria-label":"Toggle search box"}},[i("i",{staticClass:"fas fa-fw fa-search"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#disguises-toggle","aria-controls":"disguises-toggle","aria-expanded":"false","aria-label":"Toggle disguises box"}},[i("i",{staticClass:"far fa-fw fa-user-tie"})])},function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#floors-and-layers-toggle","aria-controls":"floors-and-layers-toggle","aria-expanded":"false","aria-label":"Toggle floors and layers box"}},[i("i",{staticClass:"far fa-fw fa-layer-group"})])}];i("c975"),i("4e82"),i("841c");function T(e){if(Array.isArray(e)){for(var t=0,i=new Array(e.length);t<e.length;t++)i[t]=e[t];return i}}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("e260"),i("25f0");function F(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function O(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function P(e){return T(e)||F(e)||O()}var j=i("b912"),R=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("button",e._b({staticClass:"btn control-button",on:{click:function(t){return e.$emit("click")}}},"button",e.$attrs,!1),[e._t("default")],2)},B=[],V={name:"ControlButton"},q=V,G=(i("7c8f"),Object(d["a"])(q,R,B,!1,null,"0af1be2a",null)),U=G.exports,Z=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hide-select-all"},[i("control-button",{staticClass:"hide-select-button",on:{click:function(t){return e.$emit("hide-all")}}},[i("i",{staticClass:"far fa-fw fa-eye-slash"}),e._v(" "+e._s(e.$t("map.hide-all"))+" ")]),i("control-button",{staticClass:"hide-select-button",on:{click:function(t){return e.$emit("show-all")}}},[i("i",{staticClass:"far fa-fw fa-eye"}),e._v(" "+e._s(e.$t("map.show-all"))+" ")])],1)},z=[],H={name:"HideSelectAll",components:{ControlButton:U}},W=H,J=(i("92fe"),Object(d["a"])(W,Z,z,!1,null,"5367754e",null)),X=J.exports,Y=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"card"},[i("div",{staticClass:"card-header",attrs:{id:"header-"+e.uid}},[i("div",{staticClass:"name collapsed",attrs:{"data-toggle":"collapse","data-target":"#body-"+e.uid,"aria-expanded":"false","aria-controls":"body-"+e.uid}},[e._v(" "+e._s(e.lang("map.types."+e.topLevelCategoryName,e.topLevelCategoryName))+" "),e._m(0)]),i("div",{staticClass:"visibility-toggle group-toggle",class:{"map-hidden":e.areAllNodesHiddenForTopLevelCategory()},on:{click:e.onTopLevelClick}},[e.areAllNodesHiddenForTopLevelCategory()?i("i",{staticClass:"far fa-eye-slash"}):i("i",{staticClass:"far fa-eye"})])]),i("div",{staticClass:"collapse",attrs:{id:"body-"+e.uid,"aria-labelledby":"header-"+e.uid}},[i("div",{staticClass:"card-body"},e._l(e.categories,(function(t){return i("div",{key:t.group,class:{"full-width":t.collapsible,"half-width":!t.collapsible}},[i("div",{staticClass:"name-and-toggle"},[i("div",{staticClass:"name",class:{"map-hidden":e.isCategoryHidden(t)},on:{click:function(i){return e.onCategoryLevelClick(t)}}},[i("img",{staticClass:"img-fluid",attrs:{src:"/img/map-icons/"+t.icon+".png",alt:t.group+" Icon"}}),i("span",[e._v(e._s(e.lang("map.groups."+e.topLevelCategoryName+"|"+t.group,t.group)))])]),t.collapsible?i("div",{staticClass:"visibility-toggle collapsed",attrs:{"data-toggle":"collapse","data-target":"#"+e.buildCollapsibleId(t)}},[i("i",{staticClass:"fas fa-caret-up"}),i("i",{staticClass:"fas fa-caret-down"})]):e._e()]),t.collapsible?i("div",{staticClass:"collapsible-items collapse",attrs:{id:e.buildCollapsibleId(t)}},[i("ul",{style:{columns:e.getItemsForCategory(t).length>1?2:1}},e._l(e.noDuplicates(e.getItemsForCategory(t)),(function(t){return i("li",{key:t.name},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e()])})),0)])])},K=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"float-right"},[i("i",{staticClass:"fas fa-caret-down"}),i("i",{staticClass:"fas fa-caret-up"})])}],Q=(i("c740"),{name:"TopLevelCategoryCard",props:{topLevelCategoryName:String,categories:Array,nodes:Array,ledges:Array,foliage:Array},data:function(){return{uid:this._uid}},methods:{areAllNodesHiddenForTopLevelCategory:function(){var e=!1;return"Navigation"===this.topLevelCategoryName&&(e=this.ledges.some((function(e){return e.visible}))||this.foliage.some((function(e){return e.visible}))),!e&&!this.nodes.some((function(e){return e.visible&&!e.searchResult}))},onTopLevelClick:function(){this.areAllNodesHiddenForTopLevelCategory()?this.$emit("show-top-level-category",this.topLevelCategoryName):this.$emit("hide-top-level-category",this.topLevelCategoryName)},onCategoryLevelClick:function(e){this.getItemsForCategory(e).some((function(e){return e.visible&&!e.searchResult}))?this.$emit("hide-category",e):this.$emit("show-category",e)},isCategoryHidden:function(e){return"ledge"===e.subgroup?!this.ledges.some((function(e){return e.visible})):"foliage"===e.subgroup?!this.foliage.some((function(e){return e.visible})):!this.nodes.some((function(t){return t.group===e.group&&t.visible&&!t.searchResult}))},buildCollapsibleId:function(e){var t=e.group.replace(/ /g,"_");return"collapsible-".concat(this.uid,"-").concat(t)},getItemsForCategory:function(e){return"ledge"===e.subgroup?this.ledges:"foliage"===e.subgroup?this.foliage:this.nodes.filter((function(t){return t.subgroup===e.subgroup}))},noDuplicates:function(e){for(var t=[],i=function(i){-1===t.findIndex((function(t){return t.name===e[i].name}))&&t.push(e[i])},a=0;a<e.length;a++)i(a);return t}}}),ee=Q,te=(i("54df"),Object(d["a"])(ee,Y,K,!1,null,"56499ce2",null)),ie=te.exports,ae=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-box",class:e.searchedItem?"item-selected":""},[i("select",{ref:"itemSearch",staticClass:"selectpicker",attrs:{id:e.id,"data-live-search":"true","data-title":"<i class='fas fa-fw fa-search'></i> "+e.$t("map.search"),"data-style":"control-button"},on:{change:e.onSearch}},e._l(e.searchableNodes,(function(t,a){return i("optgroup",{key:a,attrs:{label:a}},e._l(t,(function(t){return i("option",{key:a+"|"+t,domProps:{value:a+"|"+t}},[e._v(e._s(t))])})),0)})),0),i("button",{directives:[{name:"tooltip",rawName:"v-tooltip:top",value:e.$t("map.clear-search"),expression:"$t('map.clear-search')",arg:"top"},{name:"show",rawName:"v-show",value:e.searchedItem,expression:"searchedItem"}],staticClass:"btn control-button",attrs:{id:"clear-search"},on:{click:e.clearSearch}},[i("i",{staticClass:"fas fa-times"})])])},oe=[],se={name:"ItemSearch",props:{searchableNodes:Object},data:function(){return{id:this._uid,searchedItem:null}},mounted:function(){$("#".concat(this.id)).selectpicker(),this.$route.query.item&&(this.searchedItem=this.$route.query.item,$(this.$refs.itemSearch).selectpicker("val",this.searchedItem))},methods:{onSearch:function(e){this.searchedItem=e.target.value,this.updateQueryStringParameter()},updateQueryStringParameter:function(){var e=Object.assign({},this.$route.query,{item:this.searchedItem});this.searchedItem||delete e.item,this.$router.replace({query:e})},clearSearch:function(){$(this.$refs.itemSearch).selectpicker("val",""),this.searchedItem=null}},watch:{searchedItem:function(){this.$emit("search-item",this.searchedItem)}}},ne=se,re=(i("b3a7"),Object(d["a"])(ne,ae,oe,!1,null,"c6198130",null)),le=re.exports,ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"search-box"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header",attrs:{id:"header-disguises"}},[i("div",{ref:"disguiseToggle",staticClass:"name collapsed control-button",attrs:{"data-toggle":"collapse","data-target":"#body-disguises","aria-expanded":"false","aria-controls":"body-digsuies"}},[i("i",{staticClass:"far fa-fw fa-user-tie"}),i("span",{staticClass:"disguise-text"},[e._v(" "+e._s(null===e.currentDisguise?e.$t("map.disguises"):e.currentDisguise.name)+" ")]),e._m(0)])]),i("div",{staticClass:"collapse",attrs:{id:"body-disguises","aria-labelledby":"header-disguises"}},[i("div",{staticClass:"card-body disguises"},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12",on:{click:function(t){return e.changeDisguise("NONE")}}},[i("div",{staticClass:"disguise",staticStyle:{background:"#fff url('https://media.hitmaps.com/img/hitman3/ui/tiles/any_disguise.jpg') center center / auto no-repeat"}},[i("p",[e._v(e._s(e.$t("map.none")))])])]),e._l(e.disguises,(function(t){return i("div",{key:t.id,staticClass:"col-12",on:{click:function(i){return e.changeDisguise(t)}}},[i("div",{staticClass:"disguise",style:"background: url('"+t.image+"') center 70% / cover no-repeat"},[t.suit?i("i18n",{staticClass:"disguise-info",attrs:{path:"map.suit-disguise",tag:"p"}},[i("span",{attrs:{slot:"suitName"},slot:"suitName"},[e._v(e._s(t.name))])]):i("p",{staticClass:"disguise-info"},[e._v(e._s(t.name))])],1)])}))],2)])])])])},de=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"float-right"},[i("i",{staticClass:"fas fa-caret-down"}),i("i",{staticClass:"fas fa-caret-up"})])}],ue={name:"DisguiseDropdown",props:{game:Object,mission:Object,disguises:Array,currentDisguise:Object},data:function(){return{cachedDisguiseAreas:[]}},methods:{changeDisguise:function(e){this.$refs.disguiseToggle.click(),this.$emit("disguise-selected",e)}}},me=ue,ge=(i("a509"),Object(d["a"])(me,ce,de,!1,null,"7d1bf313",null)),pe=ge.exports,fe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"edit-menu"},[i("h3",[e._v(e._s(e.$t("map.what-would-you-like-to-do")))]),i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","ITEMS")}}},[i("h3",[i("i",{staticClass:"fas fa-fw fa-map-marker-alt"}),e._v(" "+e._s(e.$t("map.add-remove-items"))+" ")])]),e.nodesOnly?e._e():i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","LEDGES")}}},[i("h3",[i("i",{staticClass:"fas fa-fw fa-bezier-curve"}),e._v(" "+e._s(e.$t("map.add-remove-ledges"))+" ")])]),e.nodesOnly?e._e():i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","FOLIAGE")}}},[i("h3",[i("i",{staticClass:"fas fa-fw fa-leaf"}),e._v(" "+e._s(e.$t("map.add-remove-foliage"))+" ")])]),e.nodesOnly?e._e():i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","DISGUISE-REGIONS")}}},[i("h3",[i("i",{staticClass:"fas fa-fw fa-user-tie"}),e._v(" "+e._s(e.$t("map.manage-disguise-areas"))+" ")])]),i("i18n",{attrs:{path:"map.click-icon-to-close",tag:"p"}},[i("span",{attrs:{slot:"pencilIcon"},slot:"pencilIcon"},[i("i",{staticClass:"fas fa-pencil-alt"})])])],1)},he=[],ve={name:"EditLanding",props:{nodesOnly:Boolean}},ye=ve,be=(i("17d4"),Object(d["a"])(ye,fe,he,!1,null,"2d52ee64",null)),_e=be.exports,Ce=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"editor-enabled"},["ITEMS"===e.editorState?i("h3",[i("i",{staticClass:"fas fa-fw fa-map-marker-alt"}),e._v(" "+e._s(e.$t("map.add-remove-items"))+" ")]):"LEDGES"===e.editorState?i("h3",[i("i",{staticClass:"fas fa-fw fa-bezier-curve"}),e._v(" "+e._s(e.$t("map.add-remove-ledges"))+" ")]):"FOLIAGE"===e.editorState?i("h3",[i("i",{staticClass:"fas fa-fw fa-leaf"}),e._v(" "+e._s(e.$t("map.add-remove-foliage"))+" ")]):"DISGUISE-REGIONS"===e.editorState?i("h3",[i("i",{staticClass:"fas fa-fw fa-user-tie"}),e._v(" "+e._s(e.$t("map.manage-disguise-areas"))+" ")]):e._e()])},$e=[],Ee={name:"EditorHeader",props:{editorState:String}},ke=Ee,Ne=(i("5c71"),Object(d["a"])(ke,Ce,$e,!1,null,"47133e96",null)),we=Ne.exports,Me=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"items-menu"},[i("p",[i("i",{staticClass:"fas fa-fw fa-plus-circle"}),e._v(" "+e._s(e.$t("map.click-to-add"))+" ")]),i("p",[i("i",{staticClass:"fas fa-fw fa-arrows-alt"}),e._v(" "+e._s(e.$t("map.drag-to-move"))+" ")]),i("p",[i("i",{staticClass:"fas fa-fw fa-trash"}),e._v(" "+e._s(e.$t("map.click-item-to-delete"))+" ")]),i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","MENU")}}},[i("h3",[i("i",{staticClass:"fas fa-times-circle"}),e._v(" "+e._s(e.$t("map.close-item-menu"))+" ")])])])},Ie=[],xe={name:"EditItems"},Ae=xe,Le=(i("aff2"),Object(d["a"])(Ae,Me,Ie,!1,null,"01f4e26e",null)),De=Le.exports,Se=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"foliage-menu"},[i("p",{attrs:{"data-foliage":"delete-help"}},[i("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("map.click-foliage-to-delete"))+" ")]),i("div",{staticClass:"editor-button",class:e.drawingActive?"selected":"",on:{click:function(t){return e.$emit("enable-foliage-creation")}}},[i("h3",[i("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.$t("map.add-foliage"))+" ")]),i("p",[e._v(" "+e._s(e.$t("map.toggle-foliage-builder"))+" ")])]),i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","MENU")}}},[i("h3",[i("i",{staticClass:"fas fa-times-circle"}),e._v(" "+e._s(e.$t("map.close-foliage-menu"))+" ")])])])},Te=[],Fe={name:"EditFoliage",props:{drawingActive:Boolean}},Oe=Fe,Pe=(i("b7b2"),Object(d["a"])(Oe,Se,Te,!1,null,"e72cb1ba",null)),je=Pe.exports,Re=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"ledges-menu"},[i("p",{attrs:{"data-ledge":"delete-help"}},[i("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("map.click-ledge-to-delete"))+" ")]),i("div",{staticClass:"editor-button",class:e.drawingActive?"selected":"",on:{click:function(t){return e.$emit("enable-ledge-creation")}}},[i("h3",[i("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.$t("map.add-ledge"))+" ")]),i("p",[e._v(e._s(e.$t("map.toggle-ledge-builder")))])]),i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","MENU")}}},[i("h3",[i("i",{staticClass:"fas fa-times-circle"}),e._v(" "+e._s(e.$t("map.close-ledge-menu"))+" ")])])])},Be=[],Ve={name:"EditLedges",props:{drawingActive:Boolean}},qe=Ve,Ge=(i("80ae"),Object(d["a"])(qe,Re,Be,!1,null,"3a825907",null)),Ue=Ge.exports,Ze=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"disguise-trespassing-menu"},[i("p",{staticClass:"delete-help"},[i("i",{staticClass:"fas fa-trash"}),e._v(" "+e._s(e.$t("map.delete-existing-region"))+" ")]),i("p",[e._v(e._s(e.$t("map.select-disguise-for-editing")))]),i("div",{staticClass:"search-box"},[i("select",{ref:"disguisePicker",staticClass:"selectpicker",attrs:{name:"disguise-menu-dropdown","data-style":"control-button"},on:{change:e.changeDisguise}},[i("option",{attrs:{value:"NONE"}},[e._v("None")]),e._l(e.disguises,(function(t){return i("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.suit?e.$t("map.suit-disguise",{suitName:t.name}):t.name)+" ")])}))],2)]),null!==e.currentDisguise?[i("div",{staticClass:"editor-button",class:e.drawingActive&&"trespassing"===e.drawingType?"selected":"",on:{click:function(t){return e.initDraw("trespassing")}}},[i("h3",[i("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.$t("map.add-trespassing-region"))+" ")]),i("p",[e._v(e._s(e.$t("map.toggle-trespassing-builder")))])]),i("div",{staticClass:"editor-button",class:e.drawingActive&&"hostile"===e.drawingType?"selected":"",on:{click:function(t){return e.initDraw("hostile")}}},[i("h3",[i("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.$t("map.add-hostile-region"))+" ")]),i("p",[e._v(e._s(e.$t("map.toggle-hostile-builder")))])])]:i("div",{staticClass:"editor-button",on:{click:e.initCopyDisguiseModal}},[i("h3",[i("i",{staticClass:"fas fa-copy"}),e._v(" "+e._s(e.$t("map.copy-regions"))+" ")]),i("p",[e._v(e._s(e.$t("map.click-to-copy-regions")))])]),i("div",{staticClass:"editor-button",on:{click:function(t){return e.$emit("launch-editor","MENU")}}},[i("h3",[i("i",{staticClass:"fas fa-times-circle"}),e._v(" "+e._s(e.$t("map.close-disguise-menu"))+" ")])]),i("copy-disguise-regions",{ref:"copyDisguiseModal",attrs:{disguises:e.disguises},on:{"replace-disguise-areas":e.onReplaceDisguiseAreas}})],2)},ze=[],He=(i("e25e"),function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{"modal-title":e.$t("map.copy-disguise-areas"),id:"copy-disguises-modal",tabindex:"-1",role:"dialog"},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[i("game-button",{attrs:{type:"button","data-dismiss":"modal"}},[i("game-icon",{attrs:{icon:"failed","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.cancel"))+" ")],1),i("game-button",{attrs:{type:"submit",id:"copy-disguise-regions-btn"},on:{click:e.copyDisguiseAreas}},[i("game-icon",{attrs:{icon:"check","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.copy"))+" ")],1)]},proxy:!0}])},[i("div",{staticClass:"alert alert-warning"},[e._v(" "+e._s(e.$t("map.copy-disguises-warning"))+" ")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"original-disguise"}},[e._v(e._s(e.$t("map.source-disguise")))]),i("br"),i("select",{directives:[{name:"model",rawName:"v-model",value:e.sourceDisguise,expression:"sourceDisguise"}],ref:"originalDisguiseDropdown",staticClass:"selectpicker",attrs:{id:"original-disguise",name:"original-disguise","data-style":"control-button",required:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sourceDisguise=t.target.multiple?i:i[0]}}},e._l(e.disguises,(function(t){return i("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.suit?e.$t("map.suit-disguise",{suitName:t.name}):t.name)+" ")])})),0)])]),i("div",{staticClass:"col-md-6"},[i("div",{staticClass:"form-group"},[i("label",{attrs:{for:"target-disguise"}},[e._v(e._s(e.$t("map.target-disguise")))]),i("br"),i("select",{directives:[{name:"model",rawName:"v-model",value:e.targetDisguise,expression:"targetDisguise"}],ref:"targetDisguiseDropdown",staticClass:"selectpicker",attrs:{id:"target-disguise",name:"target-disguise","data-style":"control-button",required:""},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.targetDisguise=t.target.multiple?i:i[0]}}},e._l(e.disguises,(function(t){return i("option",{domProps:{value:t.id}},[e._v(" "+e._s(t.suit?e.$t("map.suit-disguise",{suitName:t.name}):t.name)+" ")])})),0)])])])])}),We=[],Je={name:"CopyDisguiseRegions",components:{GameIcon:r["a"],GameButton:w["a"],Modal:N["a"]},props:{disguises:Array},data:function(){return{sourceDisguise:null,targetDisguise:null}},mounted:function(){$(this.$refs.originalDisguiseDropdown).selectpicker(),$(this.$refs.targetDisguiseDropdown).selectpicker()},methods:{copyDisguiseAreas:function(){var e=this,t={originalDisguise:this.sourceDisguise,targetDisguise:this.targetDisguise};this.$http.post("".concat(this.$domain,"/api/disguise-areas/copy"),t).then((function(t){e.$emit("replace-disguise-areas",t.data.data),e.$toast.success({message:"Disguise areas copied!"})})).catch((function(t){console.error(t),e.$toast.error({message:"Failed to copy disguise areas!"})}))}}},Xe=Je,Ye=Object(d["a"])(Xe,He,We,!1,null,"13396f13",null),Ke=Ye.exports,Qe={name:"EditDisguiseRegions",components:{CopyDisguiseRegions:Ke},props:{disguises:Array,drawingActive:Boolean,currentDisguise:Object},data:function(){return{drawingType:null}},mounted:function(){$(this.$refs.disguisePicker).selectpicker(),this.currentDisguise&&$(this.$refs.disguisePicker).selectpicker("val",this.currentDisguise.id)},methods:{changeDisguise:function(e){"NONE"!==e.target.value?this.$emit("disguise-selected",this.disguises.find((function(t){return t.id===parseInt(e.target.value,10)}))):this.$emit("disguise-selected","NONE")},initDraw:function(e){this.drawingType=e,this.$emit("enable-region-creation",e)},initCopyDisguiseModal:function(){$("#copy-disguises-modal").modal("show")},onReplaceDisguiseAreas:function(e){this.$emit("replace-disguise-areas",e)}},watch:{currentDisguise:function(){var e=this;this.$nextTick((function(t){return $(e.$refs.disguisePicker).selectpicker("val",null===e.currentDisguise?"NONE":e.currentDisguise.id)}))}}},et=Qe,tt=(i("70c7"),Object(d["a"])(et,Ze,ze,!1,null,"9749aea8",null)),it=tt.exports,at=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.getAllVariantsForUser().length>1?i("div",{staticClass:"variant-box"},[i("div",{staticClass:"card"},[i("div",{staticClass:"card-header",attrs:{id:"header-variants"}},[i("div",{ref:"variantToggle",staticClass:"name collapsed control-button",attrs:{"data-toggle":"collapse","data-target":"#body-variants","aria-expanded":"false","aria-controls":"body-variants"}},[i("game-icon",{attrs:{icon:e.currentVariant.icon,"font-style":"solid"}}),i("span",{staticClass:"variant-text"},[e._v(" "+e._s(e.currentVariant.name)+" ")]),e._m(0)],1)]),i("div",{staticClass:"collapse",attrs:{id:"body-variants","aria-labelledby":"header-variants"}},[i("div",{staticClass:"card-body variants"},[i("div",{staticClass:"row"},[i("p",{staticClass:"variants-header"},[e._v(e._s(e.$t("map.other-variants")))]),e._l(e.getVariantsToShow(),(function(t){return i("div",{key:t.id,staticClass:"col-12",on:{click:function(i){return e.changeVariant(t)}}},[i("div",{staticClass:"variant"},[i("p",{staticClass:"variant-info"},[i("game-icon",{attrs:{icon:t.icon,"font-style":"solid"}}),e._v(" "+e._s(t.name)+" ")],1)])])}))],2)])])])]):e._e()},ot=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("span",{staticClass:"float-right"},[i("i",{staticClass:"fas fa-caret-down"}),i("i",{staticClass:"fas fa-caret-up"})])}],st={name:"MissionVariantSelector",components:{GameIcon:r["a"]},props:{mission:Object,currentVariant:Object,loggedIn:Boolean},methods:{getAllVariantsForUser:function(){return this.loggedIn?this.mission.variants:this.mission.variants.filter((function(e){return e.visible}))},getVariantsToShow:function(){var e=this;return this.loggedIn?this.mission.variants.filter((function(t){return t.id!==e.currentVariant.id})):this.mission.variants.filter((function(t){return t.id!==e.currentVariant.id&&t.visible}))},changeVariant:function(e){this.$refs.variantToggle.click(),this.$emit("variant-selected",e)}}},nt=st,rt=(i("8799"),Object(d["a"])(nt,at,ot,!1,null,"ba18411c",null)),lt=rt.exports,ct={name:"Sidebar",components:{GameIcon:r["a"],MissionVariantSelector:lt,FloorToggle:C,EditDisguiseRegions:it,EditLedges:Ue,EditFoliage:je,EditItems:De,EditorHeader:we,EditLanding:_e,DisguiseDropdown:pe,ItemSearch:le,TopLevelCategoryCard:ie,HideSelectAll:X,ControlButton:U},props:{game:Object,mission:Object,loggedIn:Boolean,categories:Array,nodes:Array,ledges:Array,foliage:Array,topLevelCategories:Array,disguises:Array,maxZoomLevel:Number,minZoomLevel:Number,currentZoomLevel:Number,editorState:String,drawingActive:Boolean,currentDisguise:Object,currentVariant:Object},data:function(){return{debugMode:!1}},watch:{zoomControl:function(){console.log(this.zoomControl)}},computed:{countryFlag:function(){return j["a"].getCountryFlagForLocale(this.$i18n)}},methods:{getAllVariantsForUser:function(){return this.loggedIn?this.mission.variants:this.mission.variants.filter((function(e){return e.visible}))},showDebug:function(){return!0},getSearchableNodes:function(){var e=this,t=P(this.nodes);t.sort((function(t,i){if(t.type!==i.type)return e.topLevelCategories.indexOf(t.type)<e.topLevelCategories.indexOf(i.type)?-1:1;var a=e.categories.find((function(e){return e.type===t.type&&e.group===t.group})),o=e.categories.find((function(e){return e.type===i.type&&e.group===i.group}));return a.order!==o.order?a.order<o.order?-1:1:t.name<i.name?-1:1}));var i=t.filter((function(e){return e.searchable})).map((function(e){return"".concat(e.group,"|").concat(e.name)})).filter((function(e,t,i){return i.indexOf(e)===t})),a={};return i.forEach((function(e){var t=e.split("|");t[0]in a||(a[t[0]]=[]),a[t[0]].push(t[1])})),a},beginDiscordLogin:function(){this.$cookies.set("redirect-location","".concat(window.location.pathname).concat(window.location.search),"600s"),window.location.href="https://discordapp.com/api/oauth2/authorize?client_id=681919936469401687&redirect_uri=".concat(encodeURIComponent(this.$vueDomain),"/auth&response_type=token&scope=connections%20identify%20guilds%20email")},logout:function(){localStorage.removeItem("token"),location.reload()},onSearchItem:function(e){this.$emit("search-item",e)},onHideCategory:function(e){this.$emit("hide-category",e)},onShowCategory:function(e){this.$emit("show-category",e)},onHideTopLevelCategory:function(e){this.$emit("hide-top-level-category",e)},onShowTopLevelCategory:function(e){this.$emit("show-top-level-category",e)},onLaunchEditor:function(e){this.$emit("launch-editor",e)},onEnableLedgeCreation:function(){this.$emit("enable-ledge-creation")},onEnableFoliageCreation:function(){this.$emit("enable-foliage-creation")},onDisguiseSelected:function(e){this.$emit("disguise-selected",e)},onEnableRegionCreation:function(e){this.$emit("enable-region-creation",e)},onReplaceDisguiseAreas:function(e){this.$emit("replace-disguise-areas",e)},onChangeFloor:function(e){this.$emit("change-floor",e)},onVariantSelected:function(e){this.$emit("variant-selected",e)}}},dt=ct,ut=(i("7038"),Object(d["a"])(dt,D,S,!1,null,"28ea042d",null)),mt=ut.exports,gt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{"modal-title":e.$t("map.add-edit-item"),id:"edit-item-modal",tabindex:"-1",role:"dialog",fullscreen:""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[i("game-button",{attrs:{type:"button","data-dismiss":"modal"}},[i("game-icon",{attrs:{icon:"failed","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.close"))+" ")],1),i("game-button",{ref:"saveMarkerButton",attrs:{type:"submit"},on:{click:e.saveMarker}},[i("game-icon",{attrs:{icon:"check","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.save"))+" ")],1)]},proxy:!0}])},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-md-12"},[i("div",{staticClass:"alert alert-dark",staticStyle:{"font-size":".8em"}},[e._v(" "+e._s(e.$t("map.please-indicate-when-adding"))+" "),i("ul",[i("li",[e._v(e._s(e.$t("map.required-items")))]),i("li",[e._v(e._s(e.$t("map.suspicious-items")))]),i("li",[e._v(e._s(e.$t("map.information-items")))]),i("li",[e._v(e._s(e.$t("map.in-game-description-items")))]),i("li",[e._v(e._s(e.$t("map.blank-notes")))])])]),i("div",{directives:[{name:"show",rawName:"v-show",value:"Sniper Assassin"!==e.mission.missionType,expression:"mission.missionType !== 'Sniper Assassin'"}]},[i("h3",[e._v(e._s(e.$t("map.apply-template")))]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col sm-2 col-form-label",attrs:{for:e.uid+"-template"}},[e._v(" "+e._s(e.$t("map.template"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("select",{ref:"templatePicker",staticClass:"form-control",attrs:{name:"template",title:"Select One",id:e.uid+"-template","data-live-search":"true"},on:{change:e.applyTemplate}},e._l(e.templates,(function(t,a){return i("optgroup",{key:a,attrs:{label:a}},e._l(t,(function(t){return i("option",{key:t.id,domProps:{value:a+"|"+t.id}},[e._v(" "+e._s(t.name)+" ")])})),0)})),0)])]),i("hr")])])]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-lg-6 col-md-12"},[i("h3",[e._v("Item Info")]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-subgroup"}},[e._v(" "+e._s(e.$t("map.category"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("select",{ref:"subgroupPicker",staticClass:"form-control",attrs:{name:"subgroup",title:"Select One",id:e.uid+"-subgroup","data-live-search":"true"},on:{change:e.selectCategory}},e._l(e.topLevelCategories,(function(t){return i("optgroup",{key:t,attrs:{label:t}},e._l(e.categories.filter((function(e){return e.type===t})),(function(a){return i("option",{key:a.id,attrs:{"data-content":"<img height='24' width='24' src='/img/map-icons/"+a.icon+".png' alt='"+a.group+" Icon'> "+a.group},domProps:{value:t+"|"+a.subgroup}},[e._v(" "+e._s(a.group)+" ")])})),0)})),0),e.currentCategory?i("small",{staticClass:"form-text text-muted",attrs:{id:"note-help-text"}},[e._v(" "+e._s(e.currentCategory.note)+" ")]):e._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:e.pickIconAllowed,expression:"pickIconAllowed"}],staticClass:"form-group row",attrs:{id:"icon-form-group"}},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-icon"}},[e._v(" "+e._s(e.$t("map.icon"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.icon,expression:"createEditNodeModel.icon"}],ref:"iconPicker",staticClass:"form-control",attrs:{name:"icon",id:e.uid+"-icon","data-live-search":"true"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.createEditNodeModel,"icon",t.target.multiple?i:i[0])}}},e._l(e.icons,(function(t,a){return i("optgroup",{key:a,attrs:{label:a}},e._l(t,(function(t){return i("option",{key:t.id,attrs:{"data-content":"<img height='24' width='24' src='/img/map-icons/"+t.icon+".png' alt='"+t.altText+" Icon'> "+t.altText},domProps:{value:t.icon}},[e._v(" "+e._s(t.altText)+" ")])})),0)})),0)])]),e.currentCategory?i("div",[e.currentCategory.requireName?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-name"}},[e._v(" "+e._s(e.$t("map.name"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.name,expression:"createEditNodeModel.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:e.uid+"-name"},domProps:{value:e.createEditNodeModel.name},on:{input:function(t){t.target.composing||e.$set(e.createEditNodeModel,"name",t.target.value)}}}),i("small",{staticClass:"form-text text-muted"},[e._v(" "+e._s(e.$t("map.name-note"))+" ")])])]):e._e(),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-quantity"}},[e._v(" "+e._s(e.$t("map.quantity"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.quantity,expression:"createEditNodeModel.quantity"}],staticClass:"form-control",attrs:{name:"quantity",id:e.uid+"-quantity"},on:{change:function(t){var i=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.createEditNodeModel,"quantity",t.target.multiple?i:i[0])}}},e._l(10,(function(t){return i("option",{domProps:{value:t}},[e._v(" "+e._s(t)+" ")])})),0)])]),e.currentCategory.requireAction?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-action"}},[e._v(" "+e._s(e.$t("map.action"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.targetAction,expression:"createEditNodeModel.targetAction"}],staticClass:"form-control",attrs:{type:"text",name:"action",id:e.uid+"-action"},domProps:{value:e.createEditNodeModel.targetAction},on:{input:function(t){t.target.composing||e.$set(e.createEditNodeModel,"targetAction",t.target.value)}}}),i("small",{staticClass:"form-text text-muted"},[e._v(" "+e._s(e.$t("map.action-note"))+" ")])])]):e._e(),e.currentCategory.requireTarget?i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-target"}},[e._v(" "+e._s(e.$t("map.target"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.targetAction,expression:"createEditNodeModel.targetAction"}],staticClass:"form-control",attrs:{type:"text",name:"target",id:e.uid+"-target"},domProps:{value:e.createEditNodeModel.targetAction},on:{input:function(t){t.target.composing||e.$set(e.createEditNodeModel,"targetAction",t.target.value)}}}),i("small",{staticClass:"form-text text-muted"},[e._v(" "+e._s(e.$t("map.target-note"))+" ")])])]):e._e(),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:e.uid+"-image"}},[e._v(" "+e._s(e.$t("map.image-url"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.image,expression:"createEditNodeModel.image"}],staticClass:"form-control",attrs:{type:"text",name:"image",id:e.uid+"-image"},domProps:{value:e.createEditNodeModel.image},on:{input:function(t){t.target.composing||e.$set(e.createEditNodeModel,"image",t.target.value)}}}),i("small",{staticClass:"form-text text-muted"},[e._v(" "+e._s(e.$t("map.image-url-note"))+" ")])])])]):e._e()]),i("div",{staticClass:"col-lg-6 col-md-12"},[i("h3",[e._v(e._s(e.$t("map.notes")))]),i("div",{attrs:{id:"suggest-notes"}},e._l(e.createEditNodeModel.notes,(function(t,a){return i("div",{key:t.type,staticClass:"note",class:t.type},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-sm-3"},[0!==a?i("button",{staticClass:"btn btn-block btn-light move-arrow",on:{click:function(t){return e.modifyNote("UP",a)}}},[i("i",{staticClass:"fas fa-arrow-up"}),e._v(" Move Up ")]):e._e(),a!==e.createEditNodeModel.notes.length-1?i("button",{staticClass:"btn btn-block btn-light move-arrow",on:{click:function(t){return e.modifyNote("DOWN",a)}}},[i("i",{staticClass:"fas fa-arrow-down"}),e._v(" Move Down ")]):e._e(),i("button",{staticClass:"btn btn-block btn-danger delete-button",on:{click:function(t){return e.modifyNote("DELETE",a)}}},[i("i",{staticClass:"fas fa-trash"}),e._v(" Remove ")])]),i("div",{staticClass:"col-sm-9"},[i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"note-type[]"}},[e._v(" "+e._s(e.$t("map.type"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"note.type"}],staticClass:"form-control",attrs:{name:"note-type[]"},on:{change:function(i){var a=Array.prototype.filter.call(i.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(t,"type",i.target.multiple?a:a[0])}}},[i("option",{attrs:{value:"requirement"}},[e._v(" "+e._s(e.$t("map.requirement"))+" ")]),i("option",{attrs:{value:"warning"}},[e._v(" "+e._s(e.$t("map.warning"))+" ")]),i("option",{attrs:{value:"info"}},[e._v(" "+e._s(e.$t("map.information"))+" ")]),i("option",{attrs:{value:"description"}},[e._v(" "+e._s(e.$t("map.description"))+" ")])])])]),i("div",{staticClass:"form-group row"},[i("label",{staticClass:"col-sm-2 col-form-label",attrs:{for:"note-text[]"}},[e._v(" "+e._s(e.$t("map.text"))+" ")]),i("div",{staticClass:"col-sm-10"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"note.text"}],staticClass:"form-control",attrs:{name:"note-text[]"},domProps:{value:t.text},on:{input:function(i){i.target.composing||e.$set(t,"text",i.target.value)}}})])])])])])})),0),i("div",{staticClass:"form-group row",staticStyle:{"margin-top":"10px"}},[i("div",{staticClass:"col"},[i("button",{staticClass:"btn btn-dark",attrs:{type:"button",id:"add-note-button"},on:{click:function(t){return e.createEditNodeModel.notes.push({})}}},[i("i",{staticClass:"fas fa-plus-circle"}),e._v(" "+e._s(e.$t("map.add-another-note"))+" ")])])]),i("h3",[e._v(e._s(e.$t("map.mission-variants")))]),e._l(e.mission.variants,(function(t){return i("div",{staticClass:"form-group"},[i("div",{staticClass:"form-check"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.createEditNodeModel.variantIds,expression:"createEditNodeModel.variantIds"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:e.uid+"-variant-"+t.id},domProps:{value:t.id,checked:Array.isArray(e.createEditNodeModel.variantIds)?e._i(e.createEditNodeModel.variantIds,t.id)>-1:e.createEditNodeModel.variantIds},on:{change:function(i){var a=e.createEditNodeModel.variantIds,o=i.target,s=!!o.checked;if(Array.isArray(a)){var n=t.id,r=e._i(a,n);o.checked?r<0&&e.$set(e.createEditNodeModel,"variantIds",a.concat([n])):r>-1&&e.$set(e.createEditNodeModel,"variantIds",a.slice(0,r).concat(a.slice(r+1)))}else e.$set(e.createEditNodeModel,"variantIds",s)}}}),i("label",{staticClass:"form-check-label",attrs:{for:e.uid+"-variant-"+t.id}},[e._v(" "+e._s(e.lang("difficulties."+t.name,t.name))+" ")])])])}))],2)])])},pt=[],ft=ht;function ht(e){if("function"==typeof e)return e;var t=Array.isArray(e)?[]:{};for(var i in e){var a=e[i],o={}.toString.call(a).slice(8,-1);t[i]="Array"==o||"Object"==o?ht(a):"Date"==o?new Date(a.getTime()):"RegExp"==o?RegExp(a.source,vt(a)):a}return t}function vt(e){if("string"==typeof e.source.flags)return e.source.flags;var t=[];return e.global&&t.push("g"),e.ignoreCase&&t.push("i"),e.multiline&&t.push("m"),e.sticky&&t.push("y"),e.unicode&&t.push("u"),t.join("")}i("a434");var yt=function(){function e(){Object(f["a"])(this,e)}return Object(h["a"])(e,null,[{key:"moveElement",value:function(e,t,i){var a=e[t];return e.splice(t,1),e.splice(i,0,a),e}},{key:"deleteElementByIndex",value:function(e,t){return e.splice(t,1),e}},{key:"deleteElement",value:function(e,t){var i=e.indexOf(t);return i>-1&&e.splice(i,1),e}}]),e}(),bt={name:"AddEditItemModal",components:{GameIcon:r["a"],GameButton:w["a"],Modal:N["a"]},props:{mission:Object,categories:Array,topLevelCategories:Array,currentLevel:Number,clickedPoint:Object,node:Object},data:function(){return{defaultCreateEditNodeModel:{category:null,icon:"",name:"",quantity:1,targetAction:"",image:"",notes:[],variantIds:[]},createEditNodeModel:{category:null,icon:"",name:"",quantity:1,targetAction:"",image:"",notes:[],variantIds:[]},icons:{},templates:{},currentCategory:null,uid:this._uid}},mounted:function(){var e=this;this.$http.get("".concat(this.$domain,"/api/v1/editor/icons")).then((function(t){e.icons=t.data,e.$nextTick((function(t){$(e.$refs.iconPicker).selectpicker()}))})),this.$http.get("".concat(this.$domain,"/api/v1/editor/templates")).then((function(t){e.templates=t.data,e.$nextTick((function(t){$(e.$refs.templatePicker).selectpicker()}))}))},computed:{pickIconAllowed:function(){return!this.currentCategory||-1===["Navigation|agency-pickup","Navigation|exit-location","Navigation|ledge","Navigation|foliage","Navigation|up-stair","Navigation|starting-location","Navigation|up-pipe"].indexOf(this.currentCategory)}},methods:{initializeAddEditModal:function(){var e=this;$(this.$refs.subgroupPicker).selectpicker(),$(this.$refs.subgroupPicker).selectpicker("val",-1),$(this.$refs.iconPicker).selectpicker("val",-1),$(this.$refs.templatePicker).selectpicker("val",-1),this.currentCategory=null,this.createEditNodeModel=ft(this.defaultCreateEditNodeModel),null!==this.node&&(this.createEditNodeModel.category=this.categories.find((function(t){return t.type===e.node.type&&t.subgroup===e.node.subgroup})),$(this.$refs.subgroupPicker).selectpicker("val","".concat(this.createEditNodeModel.category.type,"|").concat(this.createEditNodeModel.category.subgroup)),this.$refs.subgroupPicker.dispatchEvent(new Event("change")),this.createEditNodeModel.icon=this.node.icon,$(this.$refs.iconPicker).selectpicker("val",this.createEditNodeModel.icon),this.createEditNodeModel.name=this.node.name,this.createEditNodeModel.quantity=this.node.quantity,this.createEditNodeModel.targetAction=this.node.target,this.createEditNodeModel.image=this.node.image,this.createEditNodeModel.notes=this.node.notes.map((function(e){return{type:e.type,text:e.text}})),this.createEditNodeModel.variantIds=this.node.variants)},selectCategory:function(e){if(""!==e.target.value){var t=this.currentCategory,i=e.target.value.split("|");this.currentCategory=this.categories.find((function(e){return e.type===i[0]&&e.subgroup===i[1]})),this.createEditNodeModel.category=this.currentCategory,this.createEditNodeModel.icon=this.currentCategory.icon,null===t||t.requireAction===this.currentCategory.requireAction&&t.requireTarget===this.currentCategory.requireTarget||(this.createEditNodeModel.targetAction=""),$(this.$refs.iconPicker).selectpicker("val",this.currentCategory.icon)}},modifyNote:function(e,t){switch(e){case"DELETE":yt.deleteElementByIndex(this.createEditNodeModel.notes,t);break;case"DOWN":yt.moveElement(this.createEditNodeModel.notes,t,t+1);break;case"UP":yt.moveElement(this.createEditNodeModel.notes,t,t-1);break}},applyTemplate:function(e){if(""!==e.target.value){var t=e.target.value.split("|"),i=this.templates[t[0]].find((function(e){return e.id===parseInt(t[1],10)}));$(this.$refs.subgroupPicker).selectpicker("val","".concat(i.type,"|").concat(i.subgroup)),this.$refs.subgroupPicker.dispatchEvent(new Event("change")),$(this.$refs.iconPicker).selectpicker("val",i.icon),this.createEditNodeModel.name=i.name,this.createEditNodeModel.targetAction=i.target,this.createEditNodeModel.quantity=1,this.createEditNodeModel.image=i.image,this.createEditNodeModel.icon=i.icon,this.createEditNodeModel.category=this.categories.find((function(e){return e.type===i.type&&e.subgroup===i.subgroup})),this.createEditNodeModel.notes=[],i.description&&this.createEditNodeModel.notes.push({type:"description",text:i.description}),i.requirement&&this.createEditNodeModel.notes.push({type:"requirement",text:i.requirement}),i.warning&&this.createEditNodeModel.notes.push({type:"warning",text:i.warning}),i.information&&this.createEditNodeModel.notes.push({type:"info",text:i.information})}},saveMarker:function(){this.createEditNodeModel.variantIds.length?this.node?this.updateMarker():this.createMarker():alert("You must select at least one mission variant")},createMarker:function(){var e=this;this.$http.post("".concat(this.$domain,"/api/nodes"),{missionId:this.mission.id,icon:this.createEditNodeModel.icon,category:this.createEditNodeModel.category,name:this.createEditNodeModel.name,quantity:this.createEditNodeModel.quantity,targetAction:this.createEditNodeModel.targetAction,level:this.currentLevel,latitude:this.clickedPoint.lat,longitude:this.clickedPoint.lng,image:this.createEditNodeModel.image,notes:this.createEditNodeModel.notes,variantIds:this.createEditNodeModel.variantIds}).then((function(t){e.$emit("item-created",t.data.data),e.$toast.success({message:"Item saved!"})})).catch((function(t){e.$toast.error({message:"Changes failed to save!"})}))},updateMarker:function(){var e=this;this.$http.put("".concat(this.$domain,"/api/nodes/").concat(this.node.id),{missionId:this.mission.id,icon:this.createEditNodeModel.icon,category:this.createEditNodeModel.category,name:this.createEditNodeModel.name,quantity:this.createEditNodeModel.quantity,targetAction:this.createEditNodeModel.targetAction,level:this.currentLevel,latitude:this.node.latitude,longitude:this.node.longitude,image:this.createEditNodeModel.image,notes:this.createEditNodeModel.notes,variantIds:this.createEditNodeModel.variantIds}).then((function(t){e.$emit("item-updated",t.data.data),e.$toast.success({message:"Item updated!"})})).catch((function(t){console.log(t),e.$toast.error({message:"Changes failed to save!"})}))}}},_t=bt,Ct=(i("57b3"),Object(d["a"])(_t,gt,pt,!1,null,"072c3578",null)),$t=Ct.exports,Et=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.entity&&e.entityType?i("modal",{attrs:{id:"delete-entity","modal-title":e.modalTitle},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[i("game-button",{attrs:{type:"button","data-dismiss":"modal"}},[i("game-icon",{attrs:{icon:"failed","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.cancel"))+" ")],1),i("span",{staticClass:"delete"},[i("game-button",{attrs:{type:"submit",disabled:e.deleteButtonBlocked},on:{click:e.doDelete}},[i("game-icon",{attrs:{icon:"arrow-right","font-style":"normal"}}),e._v(" "+e._s(e.$t("map.delete"))+" ")],1)],1)]},proxy:!0}],null,!1,1116321327)},[i("i18n",{attrs:{path:"map.confirm-item-deletion-message",tag:"p"}},[i("span",{attrs:{slot:"item"},slot:"item"},[e._v(e._s(e.displayEntityType))])])],1):e._e()},kt=[],Nt={name:"DeleteEntityModal",components:{GameIcon:r["a"],GameButton:w["a"],Modal:N["a"]},props:{entity:Object,entityType:String},data:function(){return{deleteButtonBlocked:!1}},computed:{modalTitle:function(){var e=this.entityType[0].toUpperCase()+this.entityType.substr(1).toLowerCase();return"disguise-area"===this.entityType&&(e="Disguise Area"),this.$t("map.confirm-item-deletion-title",{item:e})},displayEntityType:function(){return this.entityType.replace("-"," ")}},methods:{doDelete:function(){var e=this;this.deleteButtonBlocked=!0;var t="foliage"===this.entityType?this.entityType:"".concat(this.entityType,"s");this.$http.delete("".concat(this.$domain,"/api/").concat(t,"/").concat(this.entity.id)).then((function(t){e.deleteButtonBlocked=!1,e.$toast.success({message:"Successfully deleted ".concat(e.entityType,"!")}),e.$emit("item-deleted")})).catch((function(t){e.deleteButtonBlocked=!1,e.$toast.error({message:"Failed to delete ".concat(e.entityType,"!")})}))}}},wt=Nt,Mt=(i("3583"),Object(d["a"])(wt,Et,kt,!1,null,"57f40530",null)),It=Mt.exports,xt=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("modal",{attrs:{"modal-title":e.$t("map.confirm-move"),id:"confirm-move-modal",tabindex:"-1",role:"dialog",dismissable:""},scopedSlots:e._u([{key:"modal-footer",fn:function(){return[i("game-button",{attrs:{type:"button","data-dismiss":"modal"},on:{click:e.cancelMoveMarker}},[i("game-icon",{attrs:{icon:"failed","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.cancel"))+" ")],1),i("game-button",{attrs:{type:"submit"},on:{click:e.confirmMove}},[i("game-icon",{attrs:{icon:"check","font-style":"normal"}}),e._v(" "+e._s(e.$t("form.save"))+" ")],1)]},proxy:!0}])},[i("div",{staticClass:"alert alert-warning"},[e._v(" "+e._s(e.$t("map.confirm-reposition"))+" ")])])},At=[],Lt={name:"MoveNodeModal",components:{GameIcon:r["a"],GameButton:w["a"],Modal:N["a"]},props:{node:Object},methods:{cancelMoveMarker:function(){this.node.marker.setLatLng([this.node.latitude,this.node.longitude])},confirmMove:function(){var e=this,t={latitude:this.node.marker.getLatLng().lat,longitude:this.node.marker.getLatLng().lng};this.$http.patch("".concat(this.$domain,"/api/nodes/").concat(this.node.id),t).then((function(t){e.$toast.success({message:"Item moved!"}),e.node.latitude=e.node.marker.getLatLng().lat,e.node.longitude=e.node.marker.getLatLng().lng,$("#confirm-move-modal").modal("hide")})).catch((function(t){console.error(t),e.$toast.error({message:"Error occurred when moving item!"}),e.node.marker.setLatLng([e.node.latitude,e.node.longitude]),$("#confirm-move-modal").modal("hide")}))}}},Dt=Lt,St=Object(d["a"])(Dt,xt,At,!1,null,"cbe84e32",null),Tt=St.exports,Ft={name:"Map",components:{MoveNodeModal:Tt,DeleteEntityModal:It,AddEditItemModal:$t,Sidebar:mt,NodePopup:A,FloorToggle:C,SplashScreen:m},pageTitle:function(){return this.mission?this.lang("missions.".concat(this.mission.slug),this.mission.name):"Loading"},data:function(){return{metadataLoaded:!1,mapDataLoaded:!1,game:null,mission:null,nodes:[],categories:[],topLevelCategories:[],disguises:[],disguiseAreas:{},ledges:[],foliage:[],currentFloor:0,map:null,mapLayers:{},nodeForModal:null,nodeForEditing:null,nodeForMoving:null,clickedPoint:null,vertices:[],workingLayer:null,currentDisguise:null,currentVariant:null,editorState:"OFF",disguiseRegionType:null,polyActive:!1,deletionItem:null,deletionItemType:null}},mounted:function(){var e=this,t=this.$http.get("".concat(this.$domain,"/api/v1/games/").concat(this.$route.params.game)).then((function(t){e.game=t.data[0]})),i=this.$http.get("".concat(this.$domain,"/api/v1/games/").concat(this.$route.params.game)+"/locations/".concat(this.$route.params.location)+"/missions/".concat(this.$route.params.mission)).then((function(t){e.mission=t.data[0],e.currentFloor=e.mission.startingFloorNumber,console.log(e.$route.params),e.currentVariant=void 0,e.$route.params.difficulty?e.currentVariant=e.mission.variants.find((function(t){return t.slug===e.$route.params.difficulty})):e.$route.query.variant&&(e.currentVariant=e.mission.variants.find((function(t){return t.slug===e.$route.query.variant}))),void 0===e.currentVariant&&(e.currentVariant=e.mission.variants.find((function(e){return e.default})))}));Promise.all([t,i]).then((function(t){e.metadataLoaded=!0;var i=e.$http.get("".concat(e.$domain,"/api/v2/games/").concat(e.$route.params.game)+"/locations/".concat(e.$route.params.location)+"/missions/".concat(e.$route.params.mission,"/nodes")).then((function(t){e.topLevelCategories=t.data.topLevelCategories,e.nodes=t.data.nodes,e.nodes.forEach((function(t){e.buildNodeForMap(t)})),e.categories=t.data.categories,e.mapLayers=e.buildMapLayers(),e.$nextTick((function(){e.map=L.map("map",{maxZoom:e.mission.maxZoom,minZoom:e.mission.minZoom,crs:L.CRS.Simple,renderer:e.mission.svg?L.svg():L.canvas(),maxBounds:e.mapBounds,layers:Object.values(e.mapLayers)}).setView([e.mission.mapCenterLatitude,e.mission.mapCenterLongitude],e.mission.minZoom),e.nodes.forEach((function(t){return t.marker.addTo(e.map)}))}))})),a=e.$http.get("".concat(e.$domain,"/api/v2/games/").concat(e.$route.params.game)+"/locations/".concat(e.$route.params.location)+"/missions/".concat(e.$route.params.mission,"/disguises")).then((function(t){return e.disguises=t.data.disguises})),o=e.$http.get("".concat(e.$domain,"/api/v2/games/").concat(e.$route.params.game)+"/locations/".concat(e.$route.params.location)+"/missions/".concat(e.$route.params.mission,"/ledges")).then((function(t){e.ledges=t.data.ledges,e.ledges.forEach((function(t){return e.buildLedgeForMap(t)})),e.$nextTick((function(t){return e.ledges.forEach((function(t){return t.polyline.addTo(e.map)}))}))})),s=e.$http.get("".concat(e.$domain,"/api/v2/games/").concat(e.$route.params.game)+"/locations/".concat(e.$route.params.location)+"/missions/".concat(e.$route.params.mission,"/foliage")).then((function(t){e.foliage=t.data.foliage,e.foliage.forEach((function(t){return e.buildFoliageForMap(t)})),e.$nextTick((function(t){return e.foliage.forEach((function(t){return t.polygon.addTo(e.map)}))}))}));Promise.all([i,a,o,s]).then((function(t){e.$nextTick((function(){e.updateActiveMapState(),e.mapDataLoaded=!0,e.map.on("click",e.addMarker),e.map.on("pm:drawstart",e.initDraw),e.map.on("pm:create",e.pmLayer),e.map.on("pm:drawend",e.endDraw),e.map.on("zoomend",(function(){var t=e.map.getZoom(),i={3:".8em",4:"1em",5:"1.2em"};$(".area-icon").css("font-size",i[t])}))}))}))}))},computed:{mapBounds:function(){return[this.mission.topLeftCoordinate.split(","),this.mission.bottomRightCoordinate.split(",")]},layerBounds:function(){return[this.mission.boundingBoxTopLeft.split(","),this.mission.boundingBoxBottomRight.split(",")]},showDebug:function(){return!0},svgMapUrl:function(){return void 0===this.game||void 0===this.mission?"":"https://media.hitmaps.com/img/".concat(this.game.slug,"/maps/").concat(this.mission.mapFolderName,"/")},imageTileUrl:function(){return this.mission?"".concat(this.$domain,"/api/maps/").concat(this.mission.mapFolderName,"/tiles/{floorNumber}/{z}/{x}/{y}.png"):""},loggedIn:function(){if(null!=localStorage.getItem("token")){var e=JSON.parse(atob(localStorage.getItem("token").split(".")[1])),t=new Date;if(new Date(1e3*e.exp).getTime()-t.getTime()>0)return!0}return!1}},methods:{buildNodeForMap:function(e){var t=this;e.latLng=L.latLng(e.latitude,e.longitude),e.visible=!0,e.searchResult=!1,e.marker=new L.marker([e.latitude,e.longitude],{icon:this.buildIcon(e),custom:{id:e.id},riseOnHover:!0}).on("click",(function(i){t.renderItemDetailsModal(e)})).on("dragend",(function(i){t.nodeForMoving=e,$("#confirm-move-modal").modal("show")})),this.bindTooltip(e)},buildLedgeForMap:function(e){var t=this;e.visible=!0;var i=e.vertices.map((function(e){return[e.split(",")[0],e.split(",")[1]]}));return e.polyline=L.polyline(i,{color:"#fff",weight:4,opacity:.75,custom:{id:e.id}}).bindTooltip(this.$t("map.groups.Navigation|Ledge"),{sticky:!0}).on("click",(function(){return t.displayConfirmPolyDeletionModal(e,"ledge")})),e},displayConfirmPolyDeletionModal:function(e,t){if("LEDGES"===this.editorState&&"ledge"===t||"FOLIAGE"===this.editorState&&"foliage"===t||"DISGUISE-REGIONS"===this.editorState&&"disguise-area"===t){if("LEDGES"===this.editorState)this.deletionItemType="ledge";else if("FOLIAGE"===this.editorState)this.deletionItemType="foliage";else{if("DISGUISE-REGIONS"!==this.editorState)return;this.deletionItemType="disguise-area"}this.deletionItem=e,this.$nextTick((function(){return $("#delete-entity").modal("show")}))}},buildFoliageForMap:function(e){var t=this;e.visible=!0;var i=e.vertices.map((function(e){return[e.split(",")[0],e.split(",")[1]]}));return e.polygon=L.polygon(i,{color:"#248f24",weight:4,opacity:.75,custom:{id:e.id}}).bindTooltip(this.$t("map.groups.Navigation|Foliage"),{sticky:!0}).on("click",(function(){return t.displayConfirmPolyDeletionModal(e,"foliage")})),e},buildDisguiseAreaForMap:function(e){var t=this,i=e.vertices.map((function(e){return[e.split(",")[0],e.split(",")[1]]}));return e.polygon=L.polygon(i,{color:"trespassing"===e.type?"yellow":"#f00",stroke:!1,weight:4,opacity:.75}).bindTooltip("trespassing"===e.type?this.$t("map.trespassing"):this.$t("map.hostile-area"),{sticky:!0}).on("click",(function(){return t.displayConfirmPolyDeletionModal(e,"disguise-area")})),e},buildMapLayers:function(){var e={};if(this.mission.svg||(e[0]=L.tileLayer(this.imageTileUrl.replace("{floorNumber}","0"),{noWrap:!0,minZoom:this.mission.minZoom,maxZoom:this.mission.maxZoom})),this.mission.svg)for(var t=this.mission.lowestFloorNumber;t<=this.mission.highestFloorNumber;t++)e[t]=L.imageOverlay("".concat(this.svgMapUrl).concat(t,".svg"),this.layerBounds);return this.mission.satelliteView&&(e[-99]=L.tileLayer(this.imageTileUrl.replace("{floorNumber}","-99"),{noWrap:!0,minZoom:this.mission.minZoom,maxZoom:this.mission.maxZoom})),e},updateActiveMapState:function(){this.updateActiveMapLayer(),this.updateActiveDisguiseLayer(),this.updateNodeMarkers()},updateActiveMapLayer:function(){var e=this;this.range(this.mission.lowestFloorNumber,this.mission.highestFloorNumber).forEach((function(t){return e.map.removeLayer(e.mapLayers[t])})),this.map.addLayer(this.mapLayers[this.currentFloor])},updateActiveDisguiseLayer:function(e){var t=this;e&&this.disguiseAreas[e.id].forEach((function(e){return e.polygon.removeFrom(t.map)})),this.currentDisguise&&(this.disguiseAreas[this.currentDisguise.id].forEach((function(e){return e.polygon.removeFrom(t.map)})),this.disguiseAreas[this.currentDisguise.id].filter((function(e){return e.level===t.currentFloor})).forEach((function(e){return e.polygon.addTo(t.map)})))},updateNodeMarkers:function(){var e=this;this.nodes.forEach((function(e){return e.marker._icon.style.display="none"})),this.ledges.forEach((function(t){return t.polyline.removeFrom(e.map)})),this.foliage.forEach((function(t){return t.polygon.removeFrom(e.map)})),this.nodes.filter((function(e){return e.searchResult})).forEach((function(e){return e.visible=!0})),this.nodes.filter((function(t){return t.level===e.currentFloor&&t.visible&&t.variants.includes(e.currentVariant.id)})).forEach((function(e){e.marker._icon.style.display="block",e.searchResult?e.marker._icon.classList.add("search-result"):e.marker._icon.classList.remove("search-result")})),this.ledges.filter((function(t){return t.level===e.currentFloor&&t.visible})).forEach((function(t){return t.polyline.addTo(e.map)})),this.foliage.filter((function(t){return t.level===e.currentFloor&&t.visible})).forEach((function(t){return t.polygon.addTo(e.map)})),this.$refs.floorToggle&&this.$refs.floorToggle.$forceUpdate(),this.$refs.sidebar&&this.$refs.sidebar.$forceUpdate()},buildIcon:function(e){return"area"===e.icon?new L.DivIcon({className:"area-icon",html:e.name.replace(/(?:\r\n|\r|\n)/g,"<br>")}):L.icon({iconUrl:"/img/map-icons/".concat(e.icon,".png"),iconSize:[32,32],iconAnchor:[16,16],popupAnchor:[0,0]})},bindTooltip:function(e){var t=""!==e.name?e.name:"";switch(e.subgroup){case"up-stair":t=this.$t("map.groups.Navigation|Stairwell");break;case"blend-in":t="Any Disguise"===e.name?this.$t("map.groups.Points of Interest|Blend In"):this.$t("map.blend-in-as",{disguiseName:e.name});break;case"locked-door":case"conceal-item":case"hiding-spot":case"destroy-evidence":case"weapon-crate":case"camera":case"frisk":t=e.group;break;case"area":t="";break}""!==t&&(e.quantity>1&&(t+=" (x".concat(e.quantity,")")),e.marker.bindTooltip(t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")))},renderItemDetailsModal:function(e){this.nodeForModal=e,this.$refs.nodePopup.resetDeletionState(),this.$nextTick((function(){return $("#popover-modal").modal("show")}))},addMarker:function(e){var t=this;"ITEMS"===this.editorState&&(this.nodeForEditing=null,this.clickedPoint=e.latlng,this.$nextTick((function(e){t.$refs.addEditItemModal.initializeAddEditModal(),$("#edit-item-modal").modal("show")})))},prepareEditor:function(e){var t=this;this.nodeForEditing=this.nodes.find((function(t){return t.id===e})),this.$refs.addEditItemModal.initializeAddEditModal(),this.$nextTick((function(e){t.$refs.addEditItemModal.initializeAddEditModal(),$("#edit-item-modal").modal("show")}))},deleteNode:function(e){this.nodes.find((function(t){return t.id===e})).marker.removeFrom(this.map),$("#popover-modal").modal("hide")},onItemCreated:function(e){this.nodes.push(e),this.buildNodeForMap(e),e.marker.addTo(this.map),e.marker.dragging.enable(),this.updateNodeMarkers(),$("#edit-item-modal").modal("hide")},onItemUpdated:function(e){this.nodeForEditing.marker.removeFrom(this.map),yt.deleteElement(this.nodes,this.nodeForEditing),this.nodes.push(e),this.buildNodeForMap(e),e.marker.addTo(this.map),this.updateNodeMarkers(),$("#edit-item-modal").modal("hide")},range:function(e,t){return v.range(e,t)},onChangeFloor:function(e){this.currentFloor=e},onHideAll:function(){this.nodes.forEach((function(e){return e.visible=!1})),this.ledges.forEach((function(e){return e.visible=!1})),this.foliage.forEach((function(e){return e.visible=!1})),this.updateActiveMapState()},onShowAll:function(){this.nodes.forEach((function(e){return e.visible=!0})),this.ledges.forEach((function(e){return e.visible=!0})),this.foliage.forEach((function(e){return e.visible=!0})),this.updateActiveMapState()},onSearchItem:function(e){if(this.nodes.forEach((function(e){return e.searchResult=!1})),null!==e){var t=e.split("|");this.nodes.filter((function(e){return e.group===t[0]&&e.name===t[1]})).forEach((function(e){return e.searchResult=!0}))}this.updateNodeMarkers()},onHideCategory:function(e){"ledge"===e.subgroup?this.ledges.forEach((function(e){return e.visible=!1})):"foliage"===e.subgroup?this.foliage.forEach((function(e){return e.visible=!1})):this.nodes.filter((function(t){return t.type===e.type&&t.group===e.group})).forEach((function(e){return e.visible=!1})),this.updateNodeMarkers()},onShowCategory:function(e){"ledge"===e.subgroup?this.ledges.forEach((function(e){return e.visible=!0})):"foliage"===e.subgroup?this.foliage.forEach((function(e){return e.visible=!0})):this.nodes.filter((function(t){return t.type===e.type&&t.group===e.group})).forEach((function(e){return e.visible=!0})),this.updateNodeMarkers()},onHideTopLevelCategory:function(e){this.nodes.filter((function(t){return t.type===e})).forEach((function(e){return e.visible=!1})),"Navigation"===e&&(this.ledges.forEach((function(e){return e.visible=!1})),this.foliage.forEach((function(e){return e.visible=!1}))),this.updateNodeMarkers()},onShowTopLevelCategory:function(e){this.nodes.filter((function(t){return t.type===e})).forEach((function(e){return e.visible=!0})),"Navigation"===e&&(this.ledges.forEach((function(e){return e.visible=!0})),this.foliage.forEach((function(e){return e.visible=!0}))),this.updateNodeMarkers()},onZoomIn:function(){this.map.setZoom(this.map.getZoom()+1)},onZoomOut:function(){this.map.setZoom(this.map.getZoom()-1)},onMasterEditToggle:function(){"OFF"===this.editorState?this.editorState="MENU":(this.editorState="OFF",this.toggleDraw("OFF"),this.nodes.forEach((function(e){return e.marker.dragging.disable()})))},onLaunchEditor:function(e){this.editorState=e,"MENU"===this.editorState&&this.toggleDraw("OFF"),"ITEMS"===this.editorState?this.nodes.forEach((function(e){return e.marker.dragging.enable()})):this.nodes.forEach((function(e){return e.marker.dragging.disable()}))},toggleDraw:function(e){if("OFF"===e)return this.map.pm.disableDraw("Line"),void this.map.pm.disableDraw("Polygon");this.map.pm.Draw[e]._enabled?(this.map.pm.disableDraw(e),this.polyActive=!1):(this.map.pm.enableDraw(e,{snappable:!1}),this.polyActive=!0);var t=this.polyActive?"Drawing tools enabled":"Drawing tools disabled";this.$toast.info({message:t})},onEnableLedgeCreation:function(){this.toggleDraw("Line")},onEnableFoliageCreation:function(){this.toggleDraw("Polygon")},onEnableDisguiseRegionCreation:function(e){null!==this.disguiseRegionType&&this.disguiseRegionType!==e&&this.toggleDraw("Polygon"),null!==this.disguiseRegionType&&this.disguiseRegionType===e?this.disguiseRegionType=null:this.disguiseRegionType=e,this.toggleDraw("Polygon")},initDraw:function(e){var t=this;e.workingLayer.on("pm:vertexadded",(function(e){t.vertices.push([e.latlng.lat,e.latlng.lng])}))},pmLayer:function(e){this.workingLayer=e.layer},endDraw:function(e){var t=this;if(0!==this.vertices.length){var i={vertices:[],missionId:this.mission.id,level:this.currentFloor};this.vertices.forEach((function(e){i.vertices.push("".concat(e[0],",").concat(e[1]))})),"Line"===e.shape?this.$http.post("".concat(this.$domain,"/api/ledges"),i).then((function(e){t.vertices=[],t.ledges.push(t.buildLedgeForMap(e.data.data)),t.$toast.success({message:"Ledge saved!"}),t.map.removeLayer(t.workingLayer),t.workingLayer=null,t.polyActive=!1,t.updateNodeMarkers()})).catch((function(e){t.$toast.error({message:"Error occurred when saving ledge!"})})):"FOLIAGE"===this.editorState?this.$http.post("".concat(this.$domain,"/api/foliage"),i).then((function(e){t.vertices=[],t.foliage.push(t.buildFoliageForMap(e.data.data)),t.$toast.success({message:"Foliage saved!"}),t.map.removeLayer(t.workingLayer),t.workingLayer=null,t.polyActive=!1,t.updateNodeMarkers()})).catch((function(e){t.$toast.error({message:"Error occurred when saving foliage!"})})):"DISGUISE-REGIONS"===this.editorState&&(i.disguiseId=this.currentDisguise.id,i.type=this.disguiseRegionType,this.$http.post("".concat(this.$domain,"/api/disguise-areas"),i).then((function(e){t.vertices=[],t.disguiseAreas[t.currentDisguise.id].push(t.buildDisguiseAreaForMap(e.data.data)),t.$toast.success({message:"Disguise area saved!"}),t.map.removeLayer(t.workingLayer),t.workingLayer=null,t.polyActive=!1,t.disguiseRegionType=null,t.updateActiveDisguiseLayer()})).catch((function(e){console.error(e),t.$toast.error({message:"Error occurred when saving disguise area!"})})))}},onPolyDeleted:function(){"ledge"===this.deletionItemType?(this.deletionItem.polyline.removeFrom(this.map),yt.deleteElement(this.ledges,this.deletionItem)):"foliage"===this.deletionItemType?(this.deletionItem.polygon.removeFrom(this.map),yt.deleteElement(this.foliage,this.deletionItem)):"disguise-area"===this.deletionItemType&&(this.deletionItem.polygon.removeFrom(this.map),yt.deleteElement(this.disguiseAreas[this.currentDisguise.id],this.deletionItem)),this.deletionItemType=null,this.deletionItem=null,this.updateNodeMarkers(),$("#delete-entity").modal("hide")},onDisguiseSelected:function(e){var t=this;this.disguiseRegionType&&this.onEnableDisguiseRegionCreation(this.disguiseRegionType),"NONE"===e||this.disguiseAreas[e.id]?this.currentDisguise="NONE"===e?null:e:this.$http.get("".concat(this.$domain,"/api/v2/games/").concat(this.$route.params.game)+"/locations/".concat(this.$route.params.location)+"/missions/".concat(this.$route.params.mission)+"/disguise-areas/".concat(e.id)).then((function(i){t.disguiseAreas[e.id]=i.data.disguiseAreas,t.disguiseAreas[e.id].forEach((function(e){return t.buildDisguiseAreaForMap(e)})),t.currentDisguise=e})).catch((function(e){console.error(e),t.$toast.error({message:"Failed to retrieve disguise regions!"})}))},onReplaceDisguiseAreas:function(e){var t=this;if(e.length){var i=e[0].disguiseId;this.disguiseAreas[i].forEach((function(e){return e.polygon.removeFrom(t.map)})),this.disguiseAreas[i]=e,this.disguiseAreas[i].forEach((function(e){return t.buildDisguiseAreaForMap(e)})),this.updateActiveDisguiseLayer()}},onVariantSelected:function(e){this.currentVariant=e,this.updateActiveMapState()}},watch:{currentFloor:function(){this.map&&this.updateActiveMapState()},currentDisguise:function(e,t){this.map&&this.updateActiveDisguiseLayer(t)}}},Ot=Ft,Pt=(i("1a28"),Object(d["a"])(Ot,a,o,!1,null,"3c5c175f",null));t["default"]=Pt.exports},"4df4":function(e,t,i){"use strict";var a=i("f8c2"),o=i("7b0b"),s=i("9bdd"),n=i("e95a"),r=i("50c4"),l=i("8418"),c=i("35a1");e.exports=function(e){var t,i,d,u,m,g=o(e),p="function"==typeof this?this:Array,f=arguments.length,h=f>1?arguments[1]:void 0,v=void 0!==h,y=0,b=c(g);if(v&&(h=a(h,f>2?arguments[2]:void 0,2)),void 0==b||p==Array&&n(b))for(t=r(g.length),i=new p(t);t>y;y++)l(i,y,v?h(g[y],y):g[y]);else for(u=b.call(g),m=u.next,i=new p;!(d=m.call(u)).done;y++)l(i,y,v?s(u,h,[d.value,y],!0):d.value);return i.length=y,i}},"4e82":function(e,t,i){"use strict";var a=i("23e7"),o=i("1c0b"),s=i("7b0b"),n=i("d039"),r=i("b301"),l=[],c=l.sort,d=n((function(){l.sort(void 0)})),u=n((function(){l.sort(null)})),m=r("sort"),g=d||!u||m;a({target:"Array",proto:!0,forced:g},{sort:function(e){return void 0===e?c.call(s(this)):c.call(s(this),o(e))}})},"54df":function(e,t,i){"use strict";var a=i("40f3"),o=i.n(a);o.a},"57b3":function(e,t,i){"use strict";var a=i("1012"),o=i.n(a);o.a},5899:function(e,t){e.exports="\t\n\v\f\r \u2028\u2029\ufeff"},"58a8":function(e,t,i){var a=i("1d80"),o=i("5899"),s="["+o+"]",n=RegExp("^"+s+s+"*"),r=RegExp(s+s+"*$"),l=function(e){return function(t){var i=String(a(t));return 1&e&&(i=i.replace(n,"")),2&e&&(i=i.replace(r,"")),i}};e.exports={start:l(1),end:l(2),trim:l(3)}},"5c71":function(e,t,i){"use strict";var a=i("665d"),o=i.n(a);o.a},"665d":function(e,t,i){},"6f53":function(e,t,i){var a=i("83ab"),o=i("df75"),s=i("fc6a"),n=i("d1e7").f,r=function(e){return function(t){var i,r=s(t),l=o(r),c=l.length,d=0,u=[];while(c>d)i=l[d++],a&&!n.call(r,i)||u.push(e?[i,r[i]]:r[i]);return u}};e.exports={entries:r(!0),values:r(!1)}},7038:function(e,t,i){"use strict";var a=i("c361"),o=i.n(a);o.a},"70c7":function(e,t,i){"use strict";var a=i("7c3c"),o=i.n(a);o.a},7156:function(e,t,i){var a=i("861d"),o=i("d2bb");e.exports=function(e,t,i){var s,n;return o&&"function"==typeof(s=t.constructor)&&s!==i&&a(n=s.prototype)&&n!==i.prototype&&o(e,n),e}},"72eb":function(e,t,i){},"79ec":function(e,t,i){},"7c3c":function(e,t,i){},"7c8f":function(e,t,i){"use strict";var a=i("0fc7"),o=i.n(a);o.a},"80ae":function(e,t,i){"use strict";var a=i("171d"),o=i.n(a);o.a},"841c":function(e,t,i){"use strict";var a=i("d784"),o=i("825a"),s=i("1d80"),n=i("129f"),r=i("14c3");a("search",1,(function(e,t,i){return[function(t){var i=s(this),a=void 0==t?void 0:t[e];return void 0!==a?a.call(t,i):new RegExp(t)[e](String(i))},function(e){var a=i(t,e,this);if(a.done)return a.value;var s=o(e),l=String(this),c=s.lastIndex;n(c,0)||(s.lastIndex=0);var d=r(s,l);return n(s.lastIndex,c)||(s.lastIndex=c),null===d?-1:d.index}]}))},8799:function(e,t,i){"use strict";var a=i("976b"),o=i.n(a);o.a},"923e":function(e,t,i){"use strict";var a=i("72eb"),o=i.n(a);o.a},"92fe":function(e,t,i){"use strict";var a=i("ddc5"),o=i.n(a);o.a},"976b":function(e,t,i){},"996b":function(e,t,i){"use strict";var a=i("d489"),o=i.n(a);o.a},a406:function(e,t,i){},a434:function(e,t,i){"use strict";var a=i("23e7"),o=i("23cb"),s=i("a691"),n=i("50c4"),r=i("7b0b"),l=i("65f0"),c=i("8418"),d=i("1dde"),u=Math.max,m=Math.min,g=9007199254740991,p="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d("splice")},{splice:function(e,t){var i,a,d,f,h,v,y=r(this),b=n(y.length),_=o(e,b),C=arguments.length;if(0===C?i=a=0:1===C?(i=0,a=b-_):(i=C-2,a=m(u(s(t),0),b-_)),b+i-a>g)throw TypeError(p);for(d=l(y,a),f=0;f<a;f++)h=_+f,h in y&&c(d,f,y[h]);if(d.length=a,i<a){for(f=_;f<b-a;f++)h=f+a,v=f+i,h in y?y[v]=y[h]:delete y[v];for(f=b;f>b-a+i;f--)delete y[f-1]}else if(i>a)for(f=b-a;f>_;f--)h=f+a-1,v=f+i-1,h in y?y[v]=y[h]:delete y[v];for(f=0;f<i;f++)y[f+_]=arguments[f+2];return y.length=b-a+i,d}})},a509:function(e,t,i){"use strict";var a=i("0696"),o=i.n(a);o.a},a630:function(e,t,i){var a=i("23e7"),o=i("4df4"),s=i("1c7e"),n=!s((function(e){Array.from(e)}));a({target:"Array",stat:!0,forced:n},{from:o})},a9e3:function(e,t,i){"use strict";var a=i("83ab"),o=i("da84"),s=i("94ca"),n=i("6eeb"),r=i("5135"),l=i("c6b6"),c=i("7156"),d=i("c04e"),u=i("d039"),m=i("7c73"),g=i("241c").f,p=i("06cf").f,f=i("9bf2").f,h=i("58a8").trim,v="Number",y=o[v],b=y.prototype,_=l(m(b))==v,C=function(e){var t,i,a,o,s,n,r,l,c=d(e,!1);if("string"==typeof c&&c.length>2)if(c=h(c),t=c.charCodeAt(0),43===t||45===t){if(i=c.charCodeAt(2),88===i||120===i)return NaN}else if(48===t){switch(c.charCodeAt(1)){case 66:case 98:a=2,o=49;break;case 79:case 111:a=8,o=55;break;default:return+c}for(s=c.slice(2),n=s.length,r=0;r<n;r++)if(l=s.charCodeAt(r),l<48||l>o)return NaN;return parseInt(s,a)}return+c};if(s(v,!y(" 0o1")||!y("0b1")||y("+0x1"))){for(var $,E=function(e){var t=arguments.length<1?0:e,i=this;return i instanceof E&&(_?u((function(){b.valueOf.call(i)})):l(i)!=v)?c(new y(C(t)),i,E):C(t)},k=a?g(y):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;k.length>N;N++)r(y,$=k[N])&&!r(E,$)&&f(E,$,p(y,$));E.prototype=b,b.constructor=E,n(o,v,E)}},aff2:function(e,t,i){"use strict";var a=i("79ec"),o=i.n(a);o.a},b3a7:function(e,t,i){"use strict";var a=i("0127"),o=i.n(a);o.a},b7b2:function(e,t,i){"use strict";var a=i("dece"),o=i.n(a);o.a},c361:function(e,t,i){},c740:function(e,t,i){"use strict";var a=i("23e7"),o=i("b727").findIndex,s=i("44d2"),n="findIndex",r=!0;n in[]&&Array(1)[n]((function(){r=!1})),a({target:"Array",proto:!0,forced:r},{findIndex:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),s(n)},c975:function(e,t,i){"use strict";var a=i("23e7"),o=i("4d64").indexOf,s=i("b301"),n=[].indexOf,r=!!n&&1/[1].indexOf(1,-0)<0,l=s("indexOf");a({target:"Array",proto:!0,forced:r||l},{indexOf:function(e){return r?n.apply(this,arguments)||0:o(this,e,arguments.length>1?arguments[1]:void 0)}})},d489:function(e,t,i){},d81d:function(e,t,i){"use strict";var a=i("23e7"),o=i("b727").map,s=i("d039"),n=i("1dde"),r=n("map"),l=r&&!s((function(){[].map.call({length:-1,0:1},(function(e){throw e}))}));a({target:"Array",proto:!0,forced:!r||!l},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},d8ef:function(e,t,i){},ddc5:function(e,t,i){},dece:function(e,t,i){},e25e:function(e,t,i){var a=i("23e7"),o=i("e583");a({global:!0,forced:parseInt!=o},{parseInt:o})},e583:function(e,t,i){var a=i("da84"),o=i("58a8").trim,s=i("5899"),n=a.parseInt,r=/^[+-]?0[Xx]/,l=8!==n(s+"08")||22!==n(s+"0x16");e.exports=l?function(e,t){var i=o(String(e));return n(i,t>>>0||(r.test(i)?16:10))}:n},fd8b:function(e,t,i){}}]);
//# sourceMappingURL=map-view.f428ce96.js.map